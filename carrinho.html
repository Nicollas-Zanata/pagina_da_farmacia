<!doctype html>
<html lang="pt-BR">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <link rel="stylesheet" href="css/csscarrinho.css">
    <link rel="shortcut icon" href="img/Carrinho.png" type="image/x-icon">
    <title>Carrinho - Farmácia</title>

</head>
<body>
    <div class="container" role="main">
        <header>
            <img class="logo" src="C:\Users\NICOLAS\pagina_da_farmacia\img\Logo farmácia.png" alt="Logo farmácia.">
            <h1>Carrinho de compras</h1>
            <small aria-live="polite" id="items-count">0 itens</small>
        </header>

        <section class="cart" id="cart">
            <article class="item" data-price="7,99">
                <img src="img/Dorflex.jpg" alt="Dorflex" />
                <div class="meta">
                    <h2>Dorflex</h2>
                    <p>36 comprimidos</p>
                    <div class="controls">
                        <label>
                            Qtde
                            <input type="number" class="qty" min="1" value="0" />
                        </label>
                        <button class="remove secondary" type="button">Remover</button>
                    </div>
                </div>
                <div style="text-align:right;">
                    <div class="price"> R$ 7,99 </div>
                </div>
            </article>

            <article class="item" data-price="25,39">
                <img src="img/R$.png" alt="Neosaldina" />
                <div class="meta">
                    <h2>Neosaldina</h2>
                    <p>30 comprimidos</p>
                    <div class="controls">
                        <label>
                            Qtde
                            <input type="number" class="qty" min="1" value="0" />
                        </label>
                        <button class="remove secondary" type="button">Remover</button>
                    </div>
                </div>
                <div style="text-align:right;">
                    <div class="price">R$ 25,39</div>
                </div>
            </article>


        <article class="item" data-price="14.50">
                <img src="img/R$.png" alt="Produto B" />
                <div class="meta">
                    <h2>Produto</h2>
                    <p>Frasco 100ml</p>
                    <div class="controls">
                        <label>
                            Qtde
                            <input type="number" class="qty" min="1" value="0" />
                        </label>
                        <button class="remove secondary" type="button">Remover</button>
                    </div>
                </div>
                <div style="text-align:right;">
                    <div class="price">R$ 14,50</div>
                </div>
            </article>


        <article class="item" data-price="14.50">
                <img src="img/R$.png" alt="Produto B" />
                <div class="meta">
                    <h2>Produto</h2>
                    <p>Frasco 100ml</p>
                    <div class="controls">
                        <label>
                            Qtde
                            <input type="number" class="qty" min="1" value="0" />
                        </label>
                        <button class="remove secondary" type="button">Remover</button>
                    </div>
                </div>
                <div style="text-align:right;">
                    <div class="price">R$ 14,50</div>
                </div>
            </article>

            
        <article class="item" data-price="14.50">
                <img src="img/R$.png" alt="Produto B" />
                <div class="meta">
                    <h2>Produto</h2>
                    <p>Frasco 100ml</p>
                    <div class="controls">
                        <label>
                            Qtde
                            <input type="number" class="qty" min="1" value="0" />
                        </label>
                        <button class="remove secondary" type="button">Remover</button>
                    </div>
                </div>
                <div style="text-align:right;">
                    <div class="price">R$ 14,50</div>
                </div>
            </article>

        <article class="item" data-price="14.50">
                <img src="img/R$.png" alt="Produto B" />
                <div class="meta">
                    <h2>Produto</h2>
                    <p>Frasco 100ml</p>
                    <div class="controls">
                        <label>
                            Qtde
                            <input type="number" class="qty" min="1" value="0" />
                        </label>
                        <button class="remove secondary" type="button">Remover</button>
                    </div>
                </div>
                <div style="text-align:right;">
                    <div class="price">R$ 14,50</div>
                </div>
            </article>
        </section>

        <article class="item" data-price="14.50">
                <img src="img/R$.png" alt="Produto B" />
                <div class="meta">
                    <h2>Produto</h2>
                    <p>Frasco 100ml</p>
                    <div class="controls">
                        <label>
                            Qtde
                            <input type="number" class="qty" min="1" value="0" />
                        </label>
                        <button class="remove secondary" type="button">Remover</button>
                    </div>
                </div>
                <div style="text-align:right;">
                    <div class="price">R$ 14,50</div>
                </div>
            </article>
        </section>

        <article class="item" data-price="14.50">
                <img src="img/R$.png" alt="Produto B" />
                <div class="meta">
                    <h2>Produto</h2>
                    <p>Frasco 100ml</p>
                    <div class="controls">
                        <label>
                            Qtde
                            <input type="number" class="qty" min="1" value="0" />
                        </label>
                        <button class="remove secondary" type="button">Remover</button>
                    </div>
                </div>
                <div style="text-align:right;">
                    <div class="price">R$ 14,50</div>
                </div>
            </article>
        </section>


        <div class="summary" aria-live="polite">
            <div>
                <strong>Total:</strong>
            </div>
            <div>
                <strong id="total">R$ 0,00</strong>
            </div>
        </div>

        <footer style="margin-top:1rem;display:flex;justify-content:flex-end;">
            <button id="checkout">Finalizar compra</button>
        </footer>
    </div>

    <script>
        // Atualiza contagens e total
        function formatBRL(n){ return n.toLocaleString('pt-BR',{style:'currency',currency:'BRL'}); }
        function updateCart(){
            const items = Array.from(document.querySelectorAll('.item'));
            let total = 0;
            let count = 0;
            items.forEach(item=>{
                const price = parseFloat(item.dataset.price) || 0;
                const qty = Math.max(1, parseInt(item.querySelector('.qty').value || 1,10));
                total += price * qty;
                count += qty;
            });
            document.getElementById('total').textContent = formatBRL(total);
            document.getElementById('items-count').textContent = count + (count===1? ' item' : ' itens');
        }

        // Delegação: alteração de quantidade e remoção
        document.getElementById('cart').addEventListener('input', e=>{
            if(e.target.matches('.qty')) updateCart();
        });
        document.getElementById('cart').addEventListener('click', e=>{
            if(e.target.matches('.remove')){
                const item = e.target.closest('.item');
                if(item) item.remove();
                updateCart();
            }
        });

        // Inicializa
        updateCart();

        // Ação do checkout (placeholder)
        document.getElementById('checkout').addEventListener('click', ()=>{
            alert('Simulação: redirecionar para checkout.');
        });
    </script>
</body>
</html>